"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/layout",{

/***/ "(app-pages-browser)/./src/contexts/WebSocketContext.tsx":
/*!*******************************************!*\
  !*** ./src/contexts/WebSocketContext.tsx ***!
  \*******************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WebSocketProvider: function() { return /* binding */ WebSocketProvider; },\n/* harmony export */   useWebSocket: function() { return /* binding */ useWebSocket; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* __next_internal_client_entry_do_not_use__ useWebSocket,WebSocketProvider auto */ \nvar _s = $RefreshSig$(), _s1 = $RefreshSig$();\n\nconst defaultGameState = {\n    dealer_hand: [],\n    players: {},\n    game_phase: \"waiting\",\n    winners: [],\n    min_bet: 10,\n    max_bet: 1000,\n    table_number: 1\n};\nconst WebSocketContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)({\n    ws: null,\n    gameState: defaultGameState,\n    sendMessage: ()=>{},\n    isConnected: false,\n    notifications: [],\n    addNotification: ()=>{},\n    removeNotification: ()=>{}\n});\nconst useWebSocket = ()=>{\n    _s();\n    return (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(WebSocketContext);\n};\n_s(useWebSocket, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nconst WebSocketProvider = (param)=>{\n    let { children } = param;\n    _s1();\n    const [ws, setWs] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [gameState, setGameState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(defaultGameState);\n    const [isConnected, setIsConnected] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [notifications, setNotifications] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [previousGameState, setPreviousGameState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const addNotification = (message, type)=>{\n        const id = Math.random().toString(36).substr(2, 9);\n        setNotifications((prev)=>[\n                ...prev,\n                {\n                    id,\n                    message,\n                    type\n                }\n            ]);\n    };\n    const removeNotification = (id)=>{\n        setNotifications((prev)=>prev.filter((notification)=>notification.id !== id));\n    };\n    const determineUndoneAction = (oldState, newState)=>{\n        // Check if it was a reveal hands action\n        if (oldState.game_phase === \"revealed\" && newState.game_phase !== \"revealed\") {\n            return \"Hand reveal\";\n        }\n        // Check if it was a deal cards action\n        const oldDealerCards = oldState.dealer_hand.length;\n        const newDealerCards = newState.dealer_hand.length;\n        if (oldDealerCards === 3 && newDealerCards === 0) {\n            return \"Card deal\";\n        }\n        // Check if it was a player action (play/surrender)\n        for (const [playerId, oldPlayer] of Object.entries(oldState.players)){\n            const newPlayer = newState.players[playerId];\n            if (oldPlayer.has_acted && !newPlayer.has_acted) {\n                return \"\".concat(playerId, \"'s \").concat(oldPlayer.action_type || \"action\");\n            }\n        }\n        // Check if it was a card addition\n        for (const [playerId, oldPlayer] of Object.entries(oldState.players)){\n            const newPlayer = newState.players[playerId];\n            if (oldPlayer.hand.length > newPlayer.hand.length) {\n                return \"Card addition to \".concat(playerId);\n            }\n        }\n        if (oldState.dealer_hand.length > newState.dealer_hand.length) {\n            return \"Card addition to dealer\";\n        }\n        // Check if it was a player add/remove\n        for (const [playerId, oldPlayer] of Object.entries(oldState.players)){\n            const newPlayer = newState.players[playerId];\n            if (oldPlayer.active && !newPlayer.active) {\n                return \"Player \".concat(playerId, \" removal\");\n            }\n            if (!oldPlayer.active && newPlayer.active) {\n                return \"Player \".concat(playerId, \" addition\");\n            }\n        }\n        // Default case\n        return \"Last action\";\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        let websocket;\n        let reconnectTimeout;\n        const connect = ()=>{\n            websocket = new WebSocket(\"ws://localhost:6789\");\n            websocket.onopen = ()=>{\n                console.log(\"Connected to WebSocket\");\n                setIsConnected(true);\n                if (reconnectTimeout) {\n                    clearTimeout(reconnectTimeout);\n                }\n            };\n            websocket.onclose = ()=>{\n                console.log(\"Disconnected from WebSocket\");\n                setIsConnected(false);\n                setWs(null);\n                addNotification(\"Disconnected from server\", \"error\");\n                // Attempt to reconnect after 2 seconds\n                reconnectTimeout = setTimeout(()=>{\n                    console.log(\"Attempting to reconnect...\");\n                    connect();\n                }, 2000);\n            };\n            websocket.onerror = (error)=>{\n                console.error(\"WebSocket error:\", error);\n                addNotification(\"Connection error occurred\", \"error\");\n            };\n            websocket.onmessage = (event)=>{\n                try {\n                    const data = JSON.parse(event.data);\n                    switch(data.action){\n                        case \"update_game\":\n                        case \"cards_dealt\":\n                        case \"hands_revealed\":\n                            setPreviousGameState(gameState);\n                            setGameState(data.game_state);\n                            break;\n                        case \"player_added\":\n                        case \"player_removed\":\n                            setPreviousGameState(gameState);\n                            setGameState((prev)=>({\n                                    ...prev,\n                                    players: data.players\n                                }));\n                            break;\n                        case \"table_reset\":\n                            setPreviousGameState(gameState);\n                            setGameState(data.game_state);\n                            break;\n                        case \"undo_completed\":\n                            if (previousGameState) {\n                                const undoneAction = determineUndoneAction(previousGameState, data.game_state);\n                                addNotification(\"Undid \".concat(undoneAction), \"info\");\n                            }\n                            setPreviousGameState(gameState);\n                            setGameState(data.game_state);\n                            break;\n                        case \"duplicate_card\":\n                            addNotification(\"Duplicate card detected\", \"error\");\n                            break;\n                        case \"error\":\n                            addNotification(data.message, \"error\");\n                            break;\n                        case \"card_added\":\n                            addNotification(\"Card added to \".concat(data.target), \"success\");\n                            break;\n                        default:\n                            console.log(\"Unhandled message:\", data);\n                    }\n                } catch (error) {\n                    console.error(\"Error processing message:\", error);\n                    addNotification(\"Error processing server message\", \"error\");\n                }\n            };\n            setWs(websocket);\n        };\n        connect();\n        return ()=>{\n            if (websocket) {\n                websocket.close();\n            }\n            if (reconnectTimeout) {\n                clearTimeout(reconnectTimeout);\n            }\n        };\n    }, []);\n    const [messageQueue, setMessageQueue] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    // Process queued messages when connection is established\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (isConnected && messageQueue.length > 0) {\n            messageQueue.forEach((message)=>{\n                if ((ws === null || ws === void 0 ? void 0 : ws.readyState) === WebSocket.OPEN) {\n                    ws.send(JSON.stringify(message));\n                }\n            });\n            setMessageQueue([]);\n        }\n    }, [\n        isConnected,\n        messageQueue,\n        ws\n    ]);\n    const sendMessage = (message)=>{\n        try {\n            if ((ws === null || ws === void 0 ? void 0 : ws.readyState) === WebSocket.OPEN) {\n                ws.send(JSON.stringify(message));\n            } else {\n                console.log(\"WebSocket not ready, queueing message\");\n                setMessageQueue((prev)=>[\n                        ...prev,\n                        message\n                    ]);\n            }\n        } catch (error) {\n            console.error(\"Error sending message:\", error);\n            setMessageQueue((prev)=>[\n                    ...prev,\n                    message\n                ]);\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(WebSocketContext.Provider, {\n        value: {\n            ws,\n            gameState,\n            sendMessage,\n            isConnected,\n            notifications,\n            addNotification,\n            removeNotification\n        },\n        children: children\n    }, void 0, false, {\n        fileName: \"D:\\\\Projects\\\\solunation\\\\miniflush\\\\src\\\\contexts\\\\WebSocketContext.tsx\",\n        lineNumber: 259,\n        columnNumber: 5\n    }, undefined);\n};\n_s1(WebSocketProvider, \"YVHv8QI7+EXfXcCKzJxxQwylb1A=\");\n_c = WebSocketProvider;\nvar _c;\n$RefreshReg$(_c, \"WebSocketProvider\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9jb250ZXh0cy9XZWJTb2NrZXRDb250ZXh0LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBRThFO0FBNkM5RSxNQUFNSyxtQkFBOEI7SUFDbENDLGFBQWEsRUFBRTtJQUNmQyxTQUFTLENBQUM7SUFDVkMsWUFBWTtJQUNaQyxTQUFTLEVBQUU7SUFDWEMsU0FBUztJQUNUQyxTQUFTO0lBQ1RDLGNBQWM7QUFDaEI7QUFFQSxNQUFNQyxpQ0FBbUJaLG9EQUFhQSxDQUF1QjtJQUMzRGEsSUFBSTtJQUNKQyxXQUFXVjtJQUNYVyxhQUFhLEtBQU87SUFDcEJDLGFBQWE7SUFDYkMsZUFBZSxFQUFFO0lBQ2pCQyxpQkFBaUIsS0FBTztJQUN4QkMsb0JBQW9CLEtBQU87QUFDN0I7QUFFTyxNQUFNQyxlQUFlOztJQUFNbkIsT0FBQUEsaURBQVVBLENBQUNXO0FBQWdCLEVBQUU7R0FBbERRO0FBRU4sTUFBTUMsb0JBQTZEO1FBQUMsRUFBRUMsUUFBUSxFQUFFOztJQUNyRixNQUFNLENBQUNULElBQUlVLE1BQU0sR0FBR3BCLCtDQUFRQSxDQUFtQjtJQUMvQyxNQUFNLENBQUNXLFdBQVdVLGFBQWEsR0FBR3JCLCtDQUFRQSxDQUFZQztJQUN0RCxNQUFNLENBQUNZLGFBQWFTLGVBQWUsR0FBR3RCLCtDQUFRQSxDQUFDO0lBQy9DLE1BQU0sQ0FBQ2MsZUFBZVMsaUJBQWlCLEdBQUd2QiwrQ0FBUUEsQ0FBaUIsRUFBRTtJQUNyRSxNQUFNLENBQUN3QixtQkFBbUJDLHFCQUFxQixHQUFHekIsK0NBQVFBLENBQW1CO0lBRTdFLE1BQU1lLGtCQUFrQixDQUFDVyxTQUFpQkM7UUFDeEMsTUFBTUMsS0FBS0MsS0FBS0MsTUFBTSxHQUFHQyxRQUFRLENBQUMsSUFBSUMsTUFBTSxDQUFDLEdBQUc7UUFDaERULGlCQUFpQlUsQ0FBQUEsT0FBUTttQkFBSUE7Z0JBQU07b0JBQUVMO29CQUFJRjtvQkFBU0M7Z0JBQUs7YUFBRTtJQUMzRDtJQUVB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Z0JBQWdCLEdBQUcxRSwrQ0FBUUEsQ0FBUSxFQUFFO0lBRTFELHlEQUF5RDtJQUN6REQsZ0RBQVNBLENBQUM7UUFDUixJQUFJYyxlQUFlNEQsYUFBYWpDLE1BQU0sR0FBRyxHQUFHO1lBQzFDaUMsYUFBYUUsT0FBTyxDQUFDakQsQ0FBQUE7Z0JBQ25CLElBQUloQixDQUFBQSxlQUFBQSx5QkFBQUEsR0FBSWtFLFVBQVUsTUFBS3RCLFVBQVV1QixJQUFJLEVBQUU7b0JBQ3JDbkUsR0FBR29FLElBQUksQ0FBQ1osS0FBS2EsU0FBUyxDQUFDckQ7Z0JBQ3pCO1lBQ0Y7WUFDQWdELGdCQUFnQixFQUFFO1FBQ3BCO0lBQ0YsR0FBRztRQUFDN0Q7UUFBYTREO1FBQWMvRDtLQUFHO0lBRWxDLE1BQU1FLGNBQWMsQ0FBQ2M7UUFDbkIsSUFBSTtZQUNGLElBQUloQixDQUFBQSxlQUFBQSx5QkFBQUEsR0FBSWtFLFVBQVUsTUFBS3RCLFVBQVV1QixJQUFJLEVBQUU7Z0JBQ3JDbkUsR0FBR29FLElBQUksQ0FBQ1osS0FBS2EsU0FBUyxDQUFDckQ7WUFDekIsT0FBTztnQkFDTDhCLFFBQVFDLEdBQUcsQ0FBQztnQkFDWmlCLGdCQUFnQnpDLENBQUFBLE9BQVE7MkJBQUlBO3dCQUFNUDtxQkFBUTtZQUM1QztRQUNGLEVBQUUsT0FBT29DLE9BQU87WUFDZE4sUUFBUU0sS0FBSyxDQUFDLDBCQUEwQkE7WUFDeENZLGdCQUFnQnpDLENBQUFBLE9BQVE7dUJBQUlBO29CQUFNUDtpQkFBUTtRQUM1QztJQUNGO0lBRUEscUJBQ0UsOERBQUNqQixpQkFBaUJ1RSxRQUFRO1FBQUNDLE9BQU87WUFDaEN2RTtZQUNBQztZQUNBQztZQUNBQztZQUNBQztZQUNBQztZQUNBQztRQUNGO2tCQUNHRzs7Ozs7O0FBR1AsRUFBRTtJQXpNV0Q7S0FBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL2NvbnRleHRzL1dlYlNvY2tldENvbnRleHQudHN4Pzk3ZjgiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xyXG5cclxuaW1wb3J0IFJlYWN0LCB7IGNyZWF0ZUNvbnRleHQsIHVzZUNvbnRleHQsIHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IE5vdGlmaWNhdGlvblR5cGUgfSBmcm9tICdAL2NvbXBvbmVudHMvTm90aWZpY2F0aW9uJztcclxuXHJcbmludGVyZmFjZSBOb3RpZmljYXRpb24ge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgbWVzc2FnZTogc3RyaW5nO1xyXG4gIHR5cGU6IE5vdGlmaWNhdGlvblR5cGU7XHJcbn1cclxuXHJcbmludGVyZmFjZSBHYW1lU3RhdGUge1xyXG4gIGRlYWxlcl9oYW5kOiBzdHJpbmdbXTtcclxuICBkZWFsZXJfY29tYmluYXRpb24/OiBzdHJpbmc7XHJcbiAgcGxheWVyczoge1xyXG4gICAgW2tleTogc3RyaW5nXToge1xyXG4gICAgICBoYW5kOiBzdHJpbmdbXTtcclxuICAgICAgYWN0aXZlOiBib29sZWFuO1xyXG4gICAgICByZXN1bHQ6IHN0cmluZyB8IG51bGw7XHJcbiAgICAgIGNvbWJpbmF0aW9uPzogc3RyaW5nO1xyXG4gICAgICBoYXNfYWN0ZWQ/OiBib29sZWFuO1xyXG4gICAgICBhY3Rpb25fdHlwZT86IHN0cmluZztcclxuICAgICAgaGlnaF9jb21iaW5hdGlvbj86IHN0cmluZztcclxuICAgICAgbG93X2NvbWJpbmF0aW9uPzogc3RyaW5nO1xyXG4gICAgICBtYWluX2JldF9yZXN1bHQ/OiBzdHJpbmc7XHJcbiAgICAgIGhpZ2hfYmV0X3Jlc3VsdD86IHN0cmluZztcclxuICAgICAgbG93X2JldF9yZXN1bHQ/OiBzdHJpbmc7XHJcbiAgICB9O1xyXG4gIH07XHJcbiAgZ2FtZV9waGFzZTogc3RyaW5nO1xyXG4gIHdpbm5lcnM6IHN0cmluZ1tdO1xyXG4gIG1pbl9iZXQ6IG51bWJlcjtcclxuICBtYXhfYmV0OiBudW1iZXI7XHJcbiAgdGFibGVfbnVtYmVyOiBudW1iZXI7XHJcbiAgZGVhbGVyX3F1YWxpZmllcz86IGJvb2xlYW47XHJcbn1cclxuXHJcbmludGVyZmFjZSBXZWJTb2NrZXRDb250ZXh0VHlwZSB7XHJcbiAgd3M6IFdlYlNvY2tldCB8IG51bGw7XHJcbiAgZ2FtZVN0YXRlOiBHYW1lU3RhdGU7XHJcbiAgc2VuZE1lc3NhZ2U6IChtZXNzYWdlOiBhbnkpID0+IHZvaWQ7XHJcbiAgaXNDb25uZWN0ZWQ6IGJvb2xlYW47XHJcbiAgbm90aWZpY2F0aW9uczogTm90aWZpY2F0aW9uW107XHJcbiAgYWRkTm90aWZpY2F0aW9uOiAobWVzc2FnZTogc3RyaW5nLCB0eXBlOiBOb3RpZmljYXRpb25UeXBlKSA9PiB2b2lkO1xyXG4gIHJlbW92ZU5vdGlmaWNhdGlvbjogKGlkOiBzdHJpbmcpID0+IHZvaWQ7XHJcbn1cclxuXHJcbmNvbnN0IGRlZmF1bHRHYW1lU3RhdGU6IEdhbWVTdGF0ZSA9IHtcclxuICBkZWFsZXJfaGFuZDogW10sXHJcbiAgcGxheWVyczoge30sXHJcbiAgZ2FtZV9waGFzZTogJ3dhaXRpbmcnLFxyXG4gIHdpbm5lcnM6IFtdLFxyXG4gIG1pbl9iZXQ6IDEwLFxyXG4gIG1heF9iZXQ6IDEwMDAsXHJcbiAgdGFibGVfbnVtYmVyOiAxXHJcbn07XHJcblxyXG5jb25zdCBXZWJTb2NrZXRDb250ZXh0ID0gY3JlYXRlQ29udGV4dDxXZWJTb2NrZXRDb250ZXh0VHlwZT4oe1xyXG4gIHdzOiBudWxsLFxyXG4gIGdhbWVTdGF0ZTogZGVmYXVsdEdhbWVTdGF0ZSxcclxuICBzZW5kTWVzc2FnZTogKCkgPT4ge30sXHJcbiAgaXNDb25uZWN0ZWQ6IGZhbHNlLFxyXG4gIG5vdGlmaWNhdGlvbnM6IFtdLFxyXG4gIGFkZE5vdGlmaWNhdGlvbjogKCkgPT4ge30sXHJcbiAgcmVtb3ZlTm90aWZpY2F0aW9uOiAoKSA9PiB7fVxyXG59KTtcclxuXHJcbmV4cG9ydCBjb25zdCB1c2VXZWJTb2NrZXQgPSAoKSA9PiB1c2VDb250ZXh0KFdlYlNvY2tldENvbnRleHQpO1xyXG5cclxuZXhwb3J0IGNvbnN0IFdlYlNvY2tldFByb3ZpZGVyOiBSZWFjdC5GQzx7IGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGUgfT4gPSAoeyBjaGlsZHJlbiB9KSA9PiB7XHJcbiAgY29uc3QgW3dzLCBzZXRXc10gPSB1c2VTdGF0ZTxXZWJTb2NrZXQgfCBudWxsPihudWxsKTtcclxuICBjb25zdCBbZ2FtZVN0YXRlLCBzZXRHYW1lU3RhdGVdID0gdXNlU3RhdGU8R2FtZVN0YXRlPihkZWZhdWx0R2FtZVN0YXRlKTtcclxuICBjb25zdCBbaXNDb25uZWN0ZWQsIHNldElzQ29ubmVjdGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuICBjb25zdCBbbm90aWZpY2F0aW9ucywgc2V0Tm90aWZpY2F0aW9uc10gPSB1c2VTdGF0ZTxOb3RpZmljYXRpb25bXT4oW10pO1xyXG4gIGNvbnN0IFtwcmV2aW91c0dhbWVTdGF0ZSwgc2V0UHJldmlvdXNHYW1lU3RhdGVdID0gdXNlU3RhdGU8R2FtZVN0YXRlIHwgbnVsbD4obnVsbCk7XHJcblxyXG4gIGNvbnN0IGFkZE5vdGlmaWNhdGlvbiA9IChtZXNzYWdlOiBzdHJpbmcsIHR5cGU6IE5vdGlmaWNhdGlvblR5cGUpID0+IHtcclxuICAgIGNvbnN0IGlkID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpO1xyXG4gICAgc2V0Tm90aWZpY2F0aW9ucyhwcmV2ID0+IFsuLi5wcmV2LCB7IGlkLCBtZXNzYWdlLCB0eXBlIH1dKTtcclxuICB9O1xyXG5cclxuICBjb25zdCByZW1vdmVOb3RpZmljYXRpb24gPSAoaWQ6IHN0cmluZykgPT4ge1xyXG4gICAgc2V0Tm90aWZpY2F0aW9ucyhwcmV2ID0+IHByZXYuZmlsdGVyKG5vdGlmaWNhdGlvbiA9PiBub3RpZmljYXRpb24uaWQgIT09IGlkKSk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZGV0ZXJtaW5lVW5kb25lQWN0aW9uID0gKG9sZFN0YXRlOiBHYW1lU3RhdGUsIG5ld1N0YXRlOiBHYW1lU3RhdGUpOiBzdHJpbmcgPT4ge1xyXG4gICAgLy8gQ2hlY2sgaWYgaXQgd2FzIGEgcmV2ZWFsIGhhbmRzIGFjdGlvblxyXG4gICAgaWYgKG9sZFN0YXRlLmdhbWVfcGhhc2UgPT09ICdyZXZlYWxlZCcgJiYgbmV3U3RhdGUuZ2FtZV9waGFzZSAhPT0gJ3JldmVhbGVkJykge1xyXG4gICAgICByZXR1cm4gJ0hhbmQgcmV2ZWFsJztcclxuICAgIH1cclxuXHJcbiAgICAvLyBDaGVjayBpZiBpdCB3YXMgYSBkZWFsIGNhcmRzIGFjdGlvblxyXG4gICAgY29uc3Qgb2xkRGVhbGVyQ2FyZHMgPSBvbGRTdGF0ZS5kZWFsZXJfaGFuZC5sZW5ndGg7XHJcbiAgICBjb25zdCBuZXdEZWFsZXJDYXJkcyA9IG5ld1N0YXRlLmRlYWxlcl9oYW5kLmxlbmd0aDtcclxuICAgIGlmIChvbGREZWFsZXJDYXJkcyA9PT0gMyAmJiBuZXdEZWFsZXJDYXJkcyA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gJ0NhcmQgZGVhbCc7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgaXQgd2FzIGEgcGxheWVyIGFjdGlvbiAocGxheS9zdXJyZW5kZXIpXHJcbiAgICBmb3IgKGNvbnN0IFtwbGF5ZXJJZCwgb2xkUGxheWVyXSBvZiBPYmplY3QuZW50cmllcyhvbGRTdGF0ZS5wbGF5ZXJzKSkge1xyXG4gICAgICBjb25zdCBuZXdQbGF5ZXIgPSBuZXdTdGF0ZS5wbGF5ZXJzW3BsYXllcklkXTtcclxuICAgICAgaWYgKG9sZFBsYXllci5oYXNfYWN0ZWQgJiYgIW5ld1BsYXllci5oYXNfYWN0ZWQpIHtcclxuICAgICAgICByZXR1cm4gYCR7cGxheWVySWR9J3MgJHtvbGRQbGF5ZXIuYWN0aW9uX3R5cGUgfHwgJ2FjdGlvbid9YDtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIENoZWNrIGlmIGl0IHdhcyBhIGNhcmQgYWRkaXRpb25cclxuICAgIGZvciAoY29uc3QgW3BsYXllcklkLCBvbGRQbGF5ZXJdIG9mIE9iamVjdC5lbnRyaWVzKG9sZFN0YXRlLnBsYXllcnMpKSB7XHJcbiAgICAgIGNvbnN0IG5ld1BsYXllciA9IG5ld1N0YXRlLnBsYXllcnNbcGxheWVySWRdO1xyXG4gICAgICBpZiAob2xkUGxheWVyLmhhbmQubGVuZ3RoID4gbmV3UGxheWVyLmhhbmQubGVuZ3RoKSB7XHJcbiAgICAgICAgcmV0dXJuIGBDYXJkIGFkZGl0aW9uIHRvICR7cGxheWVySWR9YDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKG9sZFN0YXRlLmRlYWxlcl9oYW5kLmxlbmd0aCA+IG5ld1N0YXRlLmRlYWxlcl9oYW5kLmxlbmd0aCkge1xyXG4gICAgICByZXR1cm4gJ0NhcmQgYWRkaXRpb24gdG8gZGVhbGVyJztcclxuICAgIH1cclxuXHJcbiAgICAvLyBDaGVjayBpZiBpdCB3YXMgYSBwbGF5ZXIgYWRkL3JlbW92ZVxyXG4gICAgZm9yIChjb25zdCBbcGxheWVySWQsIG9sZFBsYXllcl0gb2YgT2JqZWN0LmVudHJpZXMob2xkU3RhdGUucGxheWVycykpIHtcclxuICAgICAgY29uc3QgbmV3UGxheWVyID0gbmV3U3RhdGUucGxheWVyc1twbGF5ZXJJZF07XHJcbiAgICAgIGlmIChvbGRQbGF5ZXIuYWN0aXZlICYmICFuZXdQbGF5ZXIuYWN0aXZlKSB7XHJcbiAgICAgICAgcmV0dXJuIGBQbGF5ZXIgJHtwbGF5ZXJJZH0gcmVtb3ZhbGA7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKCFvbGRQbGF5ZXIuYWN0aXZlICYmIG5ld1BsYXllci5hY3RpdmUpIHtcclxuICAgICAgICByZXR1cm4gYFBsYXllciAke3BsYXllcklkfSBhZGRpdGlvbmA7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBEZWZhdWx0IGNhc2VcclxuICAgIHJldHVybiAnTGFzdCBhY3Rpb24nO1xyXG4gIH07XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBsZXQgd2Vic29ja2V0OiBXZWJTb2NrZXQ7XHJcbiAgICBsZXQgcmVjb25uZWN0VGltZW91dDogTm9kZUpTLlRpbWVvdXQ7XHJcblxyXG4gICAgY29uc3QgY29ubmVjdCA9ICgpID0+IHtcclxuICAgICAgd2Vic29ja2V0ID0gbmV3IFdlYlNvY2tldCgnd3M6Ly9sb2NhbGhvc3Q6Njc4OScpO1xyXG5cclxuICAgICAgd2Vic29ja2V0Lm9ub3BlbiA9ICgpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZygnQ29ubmVjdGVkIHRvIFdlYlNvY2tldCcpO1xyXG4gICAgICAgIHNldElzQ29ubmVjdGVkKHRydWUpO1xyXG4gICAgICAgIGlmIChyZWNvbm5lY3RUaW1lb3V0KSB7XHJcbiAgICAgICAgICBjbGVhclRpbWVvdXQocmVjb25uZWN0VGltZW91dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgd2Vic29ja2V0Lm9uY2xvc2UgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0Rpc2Nvbm5lY3RlZCBmcm9tIFdlYlNvY2tldCcpO1xyXG4gICAgICAgIHNldElzQ29ubmVjdGVkKGZhbHNlKTtcclxuICAgICAgICBzZXRXcyhudWxsKTtcclxuICAgICAgICBhZGROb3RpZmljYXRpb24oJ0Rpc2Nvbm5lY3RlZCBmcm9tIHNlcnZlcicsICdlcnJvcicpO1xyXG5cclxuICAgICAgICAvLyBBdHRlbXB0IHRvIHJlY29ubmVjdCBhZnRlciAyIHNlY29uZHNcclxuICAgICAgICByZWNvbm5lY3RUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnQXR0ZW1wdGluZyB0byByZWNvbm5lY3QuLi4nKTtcclxuICAgICAgICAgIGNvbm5lY3QoKTtcclxuICAgICAgICB9LCAyMDAwKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHdlYnNvY2tldC5vbmVycm9yID0gKGVycm9yKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignV2ViU29ja2V0IGVycm9yOicsIGVycm9yKTtcclxuICAgICAgICBhZGROb3RpZmljYXRpb24oJ0Nvbm5lY3Rpb24gZXJyb3Igb2NjdXJyZWQnLCAnZXJyb3InKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHdlYnNvY2tldC5vbm1lc3NhZ2UgPSAoZXZlbnQpID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIHN3aXRjaCAoZGF0YS5hY3Rpb24pIHtcclxuICAgICAgICAgICAgY2FzZSAndXBkYXRlX2dhbWUnOlxyXG4gICAgICAgICAgICBjYXNlICdjYXJkc19kZWFsdCc6XHJcbiAgICAgICAgICAgIGNhc2UgJ2hhbmRzX3JldmVhbGVkJzpcclxuICAgICAgICAgICAgICBzZXRQcmV2aW91c0dhbWVTdGF0ZShnYW1lU3RhdGUpO1xyXG4gICAgICAgICAgICAgIHNldEdhbWVTdGF0ZShkYXRhLmdhbWVfc3RhdGUpO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdwbGF5ZXJfYWRkZWQnOlxyXG4gICAgICAgICAgICBjYXNlICdwbGF5ZXJfcmVtb3ZlZCc6XHJcbiAgICAgICAgICAgICAgc2V0UHJldmlvdXNHYW1lU3RhdGUoZ2FtZVN0YXRlKTtcclxuICAgICAgICAgICAgICBzZXRHYW1lU3RhdGUocHJldiA9PiAoe1xyXG4gICAgICAgICAgICAgICAgLi4ucHJldixcclxuICAgICAgICAgICAgICAgIHBsYXllcnM6IGRhdGEucGxheWVyc1xyXG4gICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAndGFibGVfcmVzZXQnOlxyXG4gICAgICAgICAgICAgIHNldFByZXZpb3VzR2FtZVN0YXRlKGdhbWVTdGF0ZSk7XHJcbiAgICAgICAgICAgICAgc2V0R2FtZVN0YXRlKGRhdGEuZ2FtZV9zdGF0ZSk7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3VuZG9fY29tcGxldGVkJzpcclxuICAgICAgICAgICAgICBpZiAocHJldmlvdXNHYW1lU3RhdGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHVuZG9uZUFjdGlvbiA9IGRldGVybWluZVVuZG9uZUFjdGlvbihwcmV2aW91c0dhbWVTdGF0ZSwgZGF0YS5nYW1lX3N0YXRlKTtcclxuICAgICAgICAgICAgICAgIGFkZE5vdGlmaWNhdGlvbihgVW5kaWQgJHt1bmRvbmVBY3Rpb259YCwgJ2luZm8nKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgc2V0UHJldmlvdXNHYW1lU3RhdGUoZ2FtZVN0YXRlKTtcclxuICAgICAgICAgICAgICBzZXRHYW1lU3RhdGUoZGF0YS5nYW1lX3N0YXRlKTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnZHVwbGljYXRlX2NhcmQnOlxyXG4gICAgICAgICAgICAgIGFkZE5vdGlmaWNhdGlvbignRHVwbGljYXRlIGNhcmQgZGV0ZWN0ZWQnLCAnZXJyb3InKTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnZXJyb3InOlxyXG4gICAgICAgICAgICAgIGFkZE5vdGlmaWNhdGlvbihkYXRhLm1lc3NhZ2UsICdlcnJvcicpO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdjYXJkX2FkZGVkJzpcclxuICAgICAgICAgICAgICBhZGROb3RpZmljYXRpb24oYENhcmQgYWRkZWQgdG8gJHtkYXRhLnRhcmdldH1gLCAnc3VjY2VzcycpO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdVbmhhbmRsZWQgbWVzc2FnZTonLCBkYXRhKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcHJvY2Vzc2luZyBtZXNzYWdlOicsIGVycm9yKTtcclxuICAgICAgICAgIGFkZE5vdGlmaWNhdGlvbignRXJyb3IgcHJvY2Vzc2luZyBzZXJ2ZXIgbWVzc2FnZScsICdlcnJvcicpO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuXHJcbiAgICAgIHNldFdzKHdlYnNvY2tldCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29ubmVjdCgpO1xyXG5cclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIGlmICh3ZWJzb2NrZXQpIHtcclxuICAgICAgICB3ZWJzb2NrZXQuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAocmVjb25uZWN0VGltZW91dCkge1xyXG4gICAgICAgIGNsZWFyVGltZW91dChyZWNvbm5lY3RUaW1lb3V0KTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9LCBbXSk7XHJcblxyXG4gIGNvbnN0IFttZXNzYWdlUXVldWUsIHNldE1lc3NhZ2VRdWV1ZV0gPSB1c2VTdGF0ZTxhbnlbXT4oW10pO1xyXG5cclxuICAvLyBQcm9jZXNzIHF1ZXVlZCBtZXNzYWdlcyB3aGVuIGNvbm5lY3Rpb24gaXMgZXN0YWJsaXNoZWRcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKGlzQ29ubmVjdGVkICYmIG1lc3NhZ2VRdWV1ZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgIG1lc3NhZ2VRdWV1ZS5mb3JFYWNoKG1lc3NhZ2UgPT4ge1xyXG4gICAgICAgIGlmICh3cz8ucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0Lk9QRU4pIHtcclxuICAgICAgICAgIHdzLnNlbmQoSlNPTi5zdHJpbmdpZnkobWVzc2FnZSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIHNldE1lc3NhZ2VRdWV1ZShbXSk7XHJcbiAgICB9XHJcbiAgfSwgW2lzQ29ubmVjdGVkLCBtZXNzYWdlUXVldWUsIHdzXSk7XHJcblxyXG4gIGNvbnN0IHNlbmRNZXNzYWdlID0gKG1lc3NhZ2U6IGFueSkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKHdzPy5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuT1BFTikge1xyXG4gICAgICAgIHdzLnNlbmQoSlNPTi5zdHJpbmdpZnkobWVzc2FnZSkpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdXZWJTb2NrZXQgbm90IHJlYWR5LCBxdWV1ZWluZyBtZXNzYWdlJyk7XHJcbiAgICAgICAgc2V0TWVzc2FnZVF1ZXVlKHByZXYgPT4gWy4uLnByZXYsIG1lc3NhZ2VdKTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2VuZGluZyBtZXNzYWdlOicsIGVycm9yKTtcclxuICAgICAgc2V0TWVzc2FnZVF1ZXVlKHByZXYgPT4gWy4uLnByZXYsIG1lc3NhZ2VdKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPFdlYlNvY2tldENvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3sgXHJcbiAgICAgIHdzLCBcclxuICAgICAgZ2FtZVN0YXRlLCBcclxuICAgICAgc2VuZE1lc3NhZ2UsIFxyXG4gICAgICBpc0Nvbm5lY3RlZCxcclxuICAgICAgbm90aWZpY2F0aW9ucyxcclxuICAgICAgYWRkTm90aWZpY2F0aW9uLFxyXG4gICAgICByZW1vdmVOb3RpZmljYXRpb25cclxuICAgIH19PlxyXG4gICAgICB7Y2hpbGRyZW59XHJcbiAgICA8L1dlYlNvY2tldENvbnRleHQuUHJvdmlkZXI+XHJcbiAgKTtcclxufTsiXSwibmFtZXMiOlsiUmVhY3QiLCJjcmVhdGVDb250ZXh0IiwidXNlQ29udGV4dCIsInVzZUVmZmVjdCIsInVzZVN0YXRlIiwiZGVmYXVsdEdhbWVTdGF0ZSIsImRlYWxlcl9oYW5kIiwicGxheWVycyIsImdhbWVfcGhhc2UiLCJ3aW5uZXJzIiwibWluX2JldCIsIm1heF9iZXQiLCJ0YWJsZV9udW1iZXIiLCJXZWJTb2NrZXRDb250ZXh0Iiwid3MiLCJnYW1lU3RhdGUiLCJzZW5kTWVzc2FnZSIsImlzQ29ubmVjdGVkIiwibm90aWZpY2F0aW9ucyIsImFkZE5vdGlmaWNhdGlvbiIsInJlbW92ZU5vdGlmaWNhdGlvbiIsInVzZVdlYlNvY2tldCIsIldlYlNvY2tldFByb3ZpZGVyIiwiY2hpbGRyZW4iLCJzZXRXcyIsInNldEdhbWVTdGF0ZSIsInNldElzQ29ubmVjdGVkIiwic2V0Tm90aWZpY2F0aW9ucyIsInByZXZpb3VzR2FtZVN0YXRlIiwic2V0UHJldmlvdXNHYW1lU3RhdGUiLCJtZXNzYWdlIiwidHlwZSIsImlkIiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyIiwicHJldiIsImZpbHRlciIsIm5vdGlmaWNhdGlvbiIsImRldGVybWluZVVuZG9uZUFjdGlvbiIsIm9sZFN0YXRlIiwibmV3U3RhdGUiLCJvbGREZWFsZXJDYXJkcyIsImxlbmd0aCIsIm5ld0RlYWxlckNhcmRzIiwicGxheWVySWQiLCJvbGRQbGF5ZXIiLCJPYmplY3QiLCJlbnRyaWVzIiwibmV3UGxheWVyIiwiaGFzX2FjdGVkIiwiYWN0aW9uX3R5cGUiLCJoYW5kIiwiYWN0aXZlIiwid2Vic29ja2V0IiwicmVjb25uZWN0VGltZW91dCIsImNvbm5lY3QiLCJXZWJTb2NrZXQiLCJvbm9wZW4iLCJjb25zb2xlIiwibG9nIiwiY2xlYXJUaW1lb3V0Iiwib25jbG9zZSIsInNldFRpbWVvdXQiLCJvbmVycm9yIiwiZXJyb3IiLCJvbm1lc3NhZ2UiLCJldmVudCIsImRhdGEiLCJKU09OIiwicGFyc2UiLCJhY3Rpb24iLCJnYW1lX3N0YXRlIiwidW5kb25lQWN0aW9uIiwidGFyZ2V0IiwiY2xvc2UiLCJtZXNzYWdlUXVldWUiLCJzZXRNZXNzYWdlUXVldWUiLCJmb3JFYWNoIiwicmVhZHlTdGF0ZSIsIk9QRU4iLCJzZW5kIiwic3RyaW5naWZ5IiwiUHJvdmlkZXIiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/contexts/WebSocketContext.tsx\n"));

/***/ })

});